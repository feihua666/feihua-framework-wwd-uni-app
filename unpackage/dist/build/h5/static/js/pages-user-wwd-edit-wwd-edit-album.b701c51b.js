(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-wwd-edit-wwd-edit-album"],{"0f84":function(t,e,i){"use strict";i.r(e);var n=i("a645"),a=i.n(n);for(var u in n)"default"!==u&&function(t){i.d(e,t,function(){return n[t]})}(u);e["default"]=a.a},"287d":function(t,e,i){var n=i("595e");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("2e9a4188",n,!0,{sourceMap:!1,shadowMode:!1})},"2ccf":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"fh-picture-list fh-width-100 uni-flex fh-flex-wrap"},[t._l(t.images,function(e,n){return i("v-uni-view",{staticClass:"fh-picture-item uni-center",style:t.itemStyle},[i("v-uni-image",{staticClass:"fh-picture-item-imge fh-width-100 fh-height-100",attrs:{src:t.$config.file.getDownloadUrl(e.thumbUrl),mode:"aspectFill"},on:{click:function(i){i=t.$handleEvent(i),t.$utils.pvi(t.$config.file.getDownloadUrl(e.originUrl))}}}),i("v-uni-text",{staticClass:"fh-pickture-delete",attrs:{"data-index":n},on:{click:function(i){i=t.$handleEvent(i),t.onDelete(e)}}},[t._v("x")])],1)}),t._l(t.picList,function(e,n){return i("v-uni-view",{key:n,staticClass:"fh-picture-item uni-center",style:t.itemStyle},[i("v-uni-image",{staticClass:"fh-picture-item-imge fh-width-100 fh-height-100",attrs:{src:e.url?e.url:e.tempUrl,mode:"aspectFill"},on:{click:function(i){i=t.$handleEvent(i),t.$utils.pvi(e.url?e.url:e.tempUrl)}}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"item.uploading"}],staticClass:"fh-pickture-uploading uni-center fh-width-100"},[t._v("上传中")]),i("v-uni-text",{staticClass:"fh-pickture-delete",attrs:{"data-index":n},on:{click:function(e){e=t.$handleEvent(e),t.deleteImage(n)}}},[t._v("x")])],1)}),t._l(t.showAllAdd?t.count-t.currentCount:1,function(e){return i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.currentCount<t.count,expression:"currentCount < count"}],staticClass:"fh-picture-item uni-center",style:t.itemStyle},[i("v-uni-view",{staticClass:"fh-add-image uni-flex fh-justify-content-center fh-align-items-center fh-height-100",on:{click:function(e){e=t.$handleEvent(e),t.chooseImage(e)}}},[i("v-uni-view",{staticClass:"fh-pictrue-add-text"},[t._v("+")])],1)],1)})],2)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"595e":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".fh-picture-item[data-v-2bcd1d22]{margin:%?10?%;display:inline-block;position:relative;width:%?150?%;height:%?150?%;background-color:#eee;cursor:pointer;color:#ddd}.fh-pickture-delete[data-v-2bcd1d22]{position:absolute;top:%?-11?%;right:%?-11?%;color:hsla(0,0%,100%,.49);border-radius:50%;width:%?40?%;height:%?40?%;line-height:%?35?%;text-align:center;background-color:#ff8616;border:2px solid #fff}.fh-pictrue-add-text[data-v-2bcd1d22]{font-size:%?80?%}.fh-pickture-uploading[data-v-2bcd1d22]{line-height:%?150?%;position:absolute;left:0;bottom:0;top:0}",""])},"5d91":function(t,e,i){"use strict";i.r(e);var n=i("8243"),a=i.n(n);for(var u in n)"default"!==u&&function(t){i.d(e,t,function(){return n[t]})}(u);e["default"]=a.a},6473:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-list fh-width-100"},[i("v-uni-view",{staticClass:"uni-list-cell-divider"},[t._v("主图")]),i("v-uni-view",{staticClass:"fh-padding-30"},[i("fh-image-upload",{attrs:{images:t.images.main,path:"/wwd","item-style":"width:100%;height:220px;","on-delete":t.deleteImage,"on-upload-success":t.onImageUploadMain}})],1),i("v-uni-view",{staticClass:"uni-list-cell-divider"},[t._v("其它图片（8张）")]),i("v-uni-view",{staticClass:"fh-padding-30"},[i("fh-image-upload",{attrs:{images:t.images.normal,count:8,path:"/wwd","show-all-add":!0,"on-delete":t.deleteImage,"on-upload-success":t.onImageUploadNormal}})],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},8243:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{picList:[]}},computed:{currentCount:function(){return this.images.length+this.picList.length}},props:{images:{type:Array,default:[]},onDelete:{default:function(t){}},onUploadSuccess:{default:function(t){}},count:{type:Number,default:1},itemStyle:{default:""},showAllAdd:{default:!1},path:{default:""}},methods:{chooseImage:function(){var t=this,e=this.count;this.currentCount!=e&&(e=this.count-this.currentCount,uni.chooseImage({count:e,sizeType:["compressed"],sourceType:["album","camera"],success:function(i){if(i.tempFiles.length>e)uni.showToast({icon:"none",title:"最多选择"+e+"张"});else{var n=function(e){var n=t.picList.length;t.picList.push({index:n,tempUrl:i.tempFiles[e].path,uploading:!0}),t.$http.uploadFile(null,{filePath:i.tempFiles[e].path,data:{path:t.path,t:(new Date).getTime()},success:function(e){t.onUploadSuccess(e)},complete:function(){for(var e=0;e<t.picList.length;e++)t.picList[e].index==n&&t.deleteImage(e)}})};for(var a in i.tempFiles)n(a)}}}))},deleteImage:function(t){this.picList.splice(t,1)}}};e.default=n},a645:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("f65e"));function a(t){return t&&t.__esModule?t:{default:t}}var u={components:{fhImageUpload:n.default},data:function(){return{picData:[]}},computed:{images:function(){for(var t=[],e=[],i=0;i<this.picData.length;i++){var n={};n.id=this.picData[i].id,n.thumbUrl=this.picData[i].picThumbUrl,n.originUrl=this.picData[i].picOriginUrl,"main"==this.picData[i].type?t.push(n):e.push(n)}return{main:t,normal:e}}},methods:{deleteImage:function(t){var e=this;this.$http.delete("/wwd/user/current/pic/"+t.id,{success:function(t){e.loadPicData()}})},onImageUploadMain:function(t){this.onImageUpload(t,"main")},onImageUploadNormal:function(t){this.onImageUpload(t,"normal")},onImageUpload:function(t,e){var i=this,n=JSON.parse(t.data),a=n.data.content;i.$http.post("/wwd/user/current/pic",{data:{url:a.path,type:e,sequence:i.picData.length+1,t:(new Date).getTime()},success:function(t){i.loadPicData()}})},loadPicData:function(){var t=this;this.$http.get("/wwd/user/current/pic",{data:{orderby:"create_at",t:(new Date).getTime()},success:function(e){var i=e.data.data.content;t.picData=i},fail:function(){t.picData=[]}})}},onLoad:function(){this.loadPicData()},watch:{}};e.default=u},bfbc:function(t,e,i){"use strict";var n=i("287d"),a=i.n(n);a.a},f65e:function(t,e,i){"use strict";i.r(e);var n=i("2ccf"),a=i("5d91");for(var u in a)"default"!==u&&function(t){i.d(e,t,function(){return a[t]})}(u);i("bfbc");var c=i("2877"),s=Object(c["a"])(a["default"],n["a"],n["b"],!1,null,"2bcd1d22",null);e["default"]=s.exports},fea4:function(t,e,i){"use strict";i.r(e);var n=i("6473"),a=i("0f84");for(var u in a)"default"!==u&&function(t){i.d(e,t,function(){return a[t]})}(u);var c=i("2877"),s=Object(c["a"])(a["default"],n["a"],n["b"],!1,null,"3521dd9c",null);e["default"]=s.exports}}]);